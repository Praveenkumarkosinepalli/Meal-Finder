<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Meal Finder</title>
  <link rel="stylesheet" href="./first.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
   
<!-- ðŸ”Ž Navbar -->
<nav class="navbar bg-body-tertiary sticky-top">
  <div class="container-fluid p-2">
    <a class="navbar-brand text-white fw-bold" href="#">MEAL FINDER</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar">
      <div class="offcanvas-header">
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close" id="but"></button>
      </div>
      <div class="offcanvas-body">
        <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
          <li class="nav-item"><a class="nav-link active" href="#" data-category="Beef">Beef</a></li>
          <li class="nav-item"><a class="nav-link" href="#" data-category="Chicken">Chicken</a></li>
          <li class="nav-item"><a class="nav-link" href="#" data-category="Dessert">Dessert</a></li>
          <li class="nav-item"><a class="nav-link" href="#" data-category="Lamb">Lamb</a></li>
          <li class="nav-item"><a class="nav-link" href="#" data-category="Miscellaneous">Miscellaneous</a></li>
          <li class="nav-item"><a class="nav-link" href="#" data-category="Pasta">Pasta</a></li>
          <li class="nav-item"><a class="nav-link" href="#" data-category="Pork">Pork</a></li>
          <li class="nav-item"><a class="nav-link" href="#" data-category="Seafood">Seafood</a></li>
          <li class="nav-item"><a class="nav-link" href="#" data-category="Side">Side</a></li>
          <li class="nav-item"><a class="nav-link" href="#" data-category="Starter">Starter</a></li>
          <li class="nav-item"><a class="nav-link" href="#" data-category="Vegan">Vegan</a></li>
          <li class="nav-item"><a class="nav-link" href="#" data-category="Vegetarian">Vegetarian</a></li>
          <li class="nav-item"><a class="nav-link" href="#" data-category="Breakfast">Breakfast</a></li>
          <li class="nav-item"><a class="nav-link" href="#" data-category="Goat">Goat</a></li>
        </ul>
      </div>
    </div>
  </div>
</nav> 

<!-- ðŸ”Ž Searchbar -->
<div class="searchbar pt-5 position-relative text-center">
  <div class="overlay position-absolute h-100"></div>
  <input type="text" name="text" class="inputs" placeholder="Search items-(Press Enter)......">
  <i class="icon1 bi bi-search"></i>
  <h2 class="mt-3">What are your favorite cuisines?</h2>
  <p>PERSONALIZE YOUR EXPERIENCE</p>
</div>

<!-- ðŸ”Ž Categories -->
<h2 class="section">CATEGORIES</h2>
<div id="product"></div>
<div id="categoryDetails" class="container"></div>

<!-- ðŸ”Ž Meals -->
<h2 class="section2">MEALS</h2>
<div id="mealsitems"></div>
<div id="mealDetails"></div>
<div id="mealsList"></div>

<!-- ðŸ”Ž JS -->
<script>
/* Your original JS (unchanged, except fixed category casing & meal details) */

const searchInput = document.querySelector(".inputs");
const mealscontainer1 = document.querySelector("#mealsitems");
const categoryDetails = document.querySelector("#categoryDetails");
const mealslist = document.querySelector("#mealsList");
const mealsdetails = document.querySelector("#mealDetails");
const productContainer = document.querySelector("#product");

// Fetch categories
function fetchCategories() {
  fetch("https://www.themealdb.com/api/json/v1/1/categories.php")
    .then(res => res.json())
    .then(data => displayCategories(data.categories))
    .catch(err => console.error(err));
}

function displayCategories(categories) {
  productContainer.innerHTML = "";
  categories.forEach(prod => {
    const card = document.createElement("div");
    card.classList.add("product");
    card.innerHTML = `
      <img class="catimage" src="${prod.strCategoryThumb}" alt="${prod.strCategory}">
      <label>${prod.strCategory}</label>
    `;
    card.addEventListener("click", () => {
      fetchMealsByCategory(prod.strCategory);
      categoryDetails.innerHTML = `
        <div class="discription mt-4">
          <h2 class="tittle2">${prod.strCategory}</h2>
          <p>${prod.strCategoryDescription}</p>
        </div>
      `;
    });
    productContainer.appendChild(card);
  });
}
fetchCategories();

// Fetch meals by category
function fetchMealsByCategory(category){
  productContainer.style.display = "none";
  document.querySelector(".section").style.display = "none";
  fetch(`https://www.themealdb.com/api/json/v1/1/filter.php?c=${category}`)
    .then(res => res.json())
    .then(data => disPlayMeals(data.meals))
    .catch(() => {
      mealscontainer1.innerHTML="<p>Error fetching meals...</p>";
    });
}

// Display meals
function disPlayMeals(meals){
  mealscontainer1.innerHTML = "";
  if(!meals || meals.length === 0){
    mealscontainer1.innerHTML = "<p>No meals found!</p>";
    return;
  }
  meals.forEach(meal => {
    const mealCard = document.createElement("div");
    mealCard.classList.add("meal-card");
    mealCard.innerHTML = `
      <img class="images" src="${meal.strMealThumb}" alt="${meal.strMeal}">
      <h5 class="tittle">${meal.strMeal.slice(0, 20)}...</h5>
    `;
    mealCard.addEventListener("click",()=>{ showMealDetails(meal.idMeal); });
    mealscontainer1.appendChild(mealCard);
  });
}

// Meal details
function showMealDetails(mealId){
  fetch(`https://www.themealdb.com/api/json/v1/1/lookup.php?i=${mealId}`)
    .then(res => res.json())
    .then(data => {
      const meal = data.meals[0];
      mealsdetails.innerHTML = `
        <div class="meal-details text-center mt-4">
          <h2>${meal.strMeal}</h2>
          <img class="images" src="${meal.strMealThumb}" alt="${meal.strMeal}">
          <p><strong>Category:</strong> ${meal.strCategory}</p>
          <p><strong>Area:</strong> ${meal.strArea}</p>
          <p>${meal.strInstructions.slice(0,250)}...</p>
        </div>
      `;
    });
}

// Search
searchInput.addEventListener("keyup", (e)=>{
  if (e.key=== "Enter"){
    const searchText = e.target.value.trim();
    if (!searchText){
      mealscontainer1.innerHTML= "<p>Please enter a meal name..</p>";
      return;
    }
    fetch(`https://www.themealdb.com/api/json/v1/1/search.php?s=${searchText}`)
    .then((res)=>res.json())
    .then((data)=>{
      document.querySelector("#product").style.display ="none";
      document.querySelector(".section").style.display ="none";
      disPlayMeals(data.meals)
    })
    .catch(()=>{
      mealscontainer1.innerHTML="<p> Error fetching meals..</p>";
    });
  }
});
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
